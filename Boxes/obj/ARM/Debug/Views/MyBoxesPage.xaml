<Page x:Class="Boxes.Views.MyBoxesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Boxes.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:i="using:Microsoft.Xaml.Interactivity"
      xmlns:core="using:Microsoft.Xaml.Interactions.Core"
      mc:Ignorable="d"
      DataContext="{Binding MyBoxesVM, Source={StaticResource Locator}}"
      RequestedTheme="Light">

    <Grid Background="{StaticResource BackgroundBrush}">

        <ScrollViewer VerticalScrollBarVisibility="Auto">

            <StackPanel Orientation="Vertical">

                <HyperlinkButton Foreground="{StaticResource PrimaryBrush}"
                                 VerticalAlignment="Bottom"
                                 Margin="15"
                                 Command="{Binding ShowCreateBoxCommand}">

                    <HyperlinkButton.Content>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="En créer une"
                                       x:Uid="CreateBoxTextBlock"
                                       VerticalAlignment="Center" />
                            <TextBlock Text=""
                                       FontFamily="Segoe MDL2 Assets"
                                       Margin="5,0"
                                       FontSize="20" />
                        </StackPanel>
                    </HyperlinkButton.Content>

                </HyperlinkButton>

                <GridView ItemsSource="{Binding Boxes, Mode=OneWay}"
                          IsItemClickEnabled="True"
                          SelectionMode="None"
                          ItemTemplate="{StaticResource BoxesDataTemplate}"
                          HorizontalAlignment="Center"
                          Visibility="{Binding IsLoading, Mode=OneWay, Converter={StaticResource InverseVisibilityConverter}}"
                          ScrollViewer.VerticalScrollMode="Disabled">

                    <GridView.ItemContainerStyle>
                        <Style TargetType="GridViewItem">
                            <Setter Property="Margin"
                                    Value="10" />
                        </Style>
                    </GridView.ItemContainerStyle>

                    <i:Interaction.Behaviors>
                        <core:EventTriggerBehavior EventName="ItemClick">
                            <core:InvokeCommandAction Command="{Binding ShowBoxCommand}"
                                                      InputConverter="{StaticResource ItemClickedConverter}" />
                        </core:EventTriggerBehavior>
                    </i:Interaction.Behaviors>

                </GridView>

            </StackPanel>

        </ScrollViewer>

        <ProgressRing Foreground="{StaticResource PrimaryBrush}"
                      IsActive="{Binding IsLoading, Mode=OneWay}"
                      Visibility="{Binding IsLoading, Mode=OneWay, Converter={StaticResource VisibilityConverter}}"
                      Width="48"
                      Height="48" />

    </Grid>

</Page>

