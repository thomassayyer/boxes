<Page x:Class="Boxes.Views.HomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Boxes.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:i="using:Microsoft.Xaml.Interactivity"
      xmlns:core="using:Microsoft.Xaml.Interactions.Core"
      mc:Ignorable="d"
      DataContext="{Binding HomeVM, Source={StaticResource Locator}}"
      RequestedTheme="Light">

    <Grid Background="{StaticResource BackgroundBrush}">

        <ScrollViewer VerticalScrollBarVisibility="Auto"
                      Visibility="{Binding IsLoading, Mode=OneWay, Converter={StaticResource InverseVisibilityConverter}}">

            <StackPanel Orientation="Vertical">

                <GridView ItemsSource="{Binding Posts, Mode=OneWay}"
                          IsItemClickEnabled="True"
                          SelectionMode="None"
                          ItemTemplate="{StaticResource PostsDataTemplate}"
                          Margin="10"
                          HorizontalAlignment="Center"
                          ScrollViewer.VerticalScrollMode="Disabled">

                    <GridView.ItemContainerStyle>
                        <Style TargetType="GridViewItem">
                            <Setter Property="Margin"
                                    Value="10" />
                        </Style>
                    </GridView.ItemContainerStyle>

                    <i:Interaction.Behaviors>
                        <core:EventTriggerBehavior EventName="ItemClick">
                            <core:InvokeCommandAction Command="{Binding ShowPostCommand}"
                                                      InputConverter="{StaticResource ItemClickedConverter}" />
                        </core:EventTriggerBehavior>
                    </i:Interaction.Behaviors>

                </GridView>

                <TextBlock Text=""
                           FontFamily="Segoe MDL2 Assets"
                           FontSize="40"
                           HorizontalAlignment="Center"
                           Foreground="{StaticResource SmallBrush}"
                           Margin="0" />

            </StackPanel>

        </ScrollViewer>

        <ProgressRing Foreground="{StaticResource PrimaryBrush}"
                      IsActive="{Binding IsLoading, Mode=OneWay}"
                      Visibility="{Binding IsLoading, Mode=OneWay, Converter={StaticResource VisibilityConverter}}"
                      Width="48"
                      Height="48" />

    </Grid>
</Page>

