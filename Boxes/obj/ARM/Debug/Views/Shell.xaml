<Page x:Class="Boxes.Views.Shell"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Boxes.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      DataContext="{Binding ShellVM, Source={StaticResource Locator}}"
      RequestedTheme="Light">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Auxiliary/Resources/Styles/SplitViewStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Grid Background="{StaticResource BackgroundBrush}">

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>

                <VisualState x:ConnectionId='1' x:Name="Phone">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="ShellSplitView.DisplayMode"
                                Value="Overlay" />
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:ConnectionId='2' x:Name="Tablet">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600" />
                    </VisualState.StateTriggers>
                </VisualState>

                <VisualState x:ConnectionId='3' x:Name="Desktop">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800" />
                    </VisualState.StateTriggers>
                </VisualState>

            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal"
                    Background="White">

            <Button x:ConnectionId='6' x:Name="HamburgerMenuButton"
                                                     
                    Style="{StaticResource PrimaryButtonStyle}"
                    Width="48"
                    Height="48">
                <Button.Content>
                    <TextBlock Text=""
                               Style="{StaticResource SplitViewTextBlockStyle}"
                               Foreground="White" />
                </Button.Content>
            </Button>

            <Button x:ConnectionId='7' x:Name="BackButton"
                    Width="48"
                    Height="48"
                    Visibility="{Binding IsBackButtonVisible, Mode=OneWay, Converter={StaticResource VisibilityConverter}}"
                    Command="{Binding GoBackCommand}"
                    Style="{StaticResource DefaultButtonStyle}">
                <Button.Content>
                    <TextBlock Text=""
                               Style="{StaticResource SplitViewTextBlockStyle}"
                               Foreground="Black" />
                </Button.Content>
            </Button>

            <TextBlock Text="{Binding Title, Mode=OneWay}"
                       Foreground="Black"
                       VerticalAlignment="Center"
                       Margin="10,0"
                       FontSize="{StaticResource SplitViewLargeNavFontSize}" />

        </StackPanel>

        <SplitView x:ConnectionId='4' x:Name="ShellSplitView"
                   Grid.Row="1">
            <SplitView.Pane>

                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Vertical">

                        <RadioButton GroupName="Menu"
                                     Style="{StaticResource SplitViewRadioButtonStyle}"
                                     Content="Accueil"
                                     IsChecked="True"
                                     Command="{Binding NavigateToHomeCommand}"
                                     x:Uid="HomeRadioButton">
                            <RadioButton.Tag>
                                <TextBlock Text=""
                                           Style="{StaticResource SplitViewTextBlockStyle}" />
                            </RadioButton.Tag>
                        </RadioButton>

                        <RadioButton GroupName="Menu"
                                     Style="{StaticResource SplitViewRadioButtonStyle}"
                                     Content="Découvrir"
                                     Command="{Binding NavigateToDiscoverCommand}"
                                     x:Uid="DiscoverRadioButton">
                            <RadioButton.Tag>
                                <TextBlock Text=""
                                           Style="{StaticResource SplitViewTextBlockStyle}" />
                            </RadioButton.Tag>
                        </RadioButton>

                        <RadioButton GroupName="Menu"
                                     Style="{StaticResource SplitViewRadioButtonStyle}"
                                     Content="Mes boites"
                                     Command="{Binding NavigateToMyBoxesCommand}"
                                     x:Uid="MyBoxesRadioButton">
                            <RadioButton.Tag>
                                <TextBlock Text=""
                                           Style="{StaticResource SplitViewTextBlockStyle}" />
                            </RadioButton.Tag>
                        </RadioButton>

                    </StackPanel>

                    <StackPanel Orientation="Vertical"
                                Grid.Row="2">
                        <RadioButton GroupName="Menu"
                                     Style="{StaticResource SplitViewRadioButtonStyle}"
                                     Command="{Binding SignoutCommand}">
                            <RadioButton.Content>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock Text="{Binding CurrentUserName, Mode=OneWay}"
                                               FontSize="{StaticResource SmallFontSize}" />
                                    <TextBlock Text="Se déconnecter"
                                               x:Uid="SignoutTextBlock" />
                                </StackPanel>
                            </RadioButton.Content>
                            <RadioButton.Tag>
                                <TextBlock Text=""
                                           Style="{StaticResource SplitViewTextBlockStyle}" />
                            </RadioButton.Tag>
                        </RadioButton>
                    </StackPanel>

                </Grid>

            </SplitView.Pane>

            <SplitView.Content>

                <Frame x:ConnectionId='5' x:Name="ContentFrame">
                    <Frame.ContentTransitions>
                        <TransitionCollection>
                            <ContentThemeTransition VerticalOffset="100" />
                        </TransitionCollection>
                    </Frame.ContentTransitions>
                </Frame>

            </SplitView.Content>

        </SplitView>

    </Grid>
</Page>

